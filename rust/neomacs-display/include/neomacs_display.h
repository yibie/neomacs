/* Auto-generated by cbindgen. Do not edit. */
/* Neomacs Display Engine C FFI */


#ifndef NEOMACS_DISPLAY_H
#define NEOMACS_DISPLAY_H

/* Warning: this file was auto-generated by cbindgen. */

#include <stdarg.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

/**
 * Modifier flags matching Emacs.
 */
#define NEOMACS_SHIFT_MASK (1 << 0)

#define NEOMACS_CTRL_MASK (1 << 1)

#define NEOMACS_META_MASK (1 << 2)

#define NEOMACS_SUPER_MASK (1 << 3)

/**
 * Event kinds for NeomacsInputEvent.kind
 */
#define NEOMACS_EVENT_KEY_PRESS     1
#define NEOMACS_EVENT_KEY_RELEASE   2
#define NEOMACS_EVENT_MOUSE_PRESS   3
#define NEOMACS_EVENT_MOUSE_RELEASE 4
#define NEOMACS_EVENT_MOUSE_MOVE    5
#define NEOMACS_EVENT_SCROLL        6
#define NEOMACS_EVENT_RESIZE        7
#define NEOMACS_EVENT_CLOSE_REQUEST 8
#define NEOMACS_EVENT_FOCUS_IN      9
#define NEOMACS_EVENT_FOCUS_OUT     10

#define DRM_FORMAT_ARGB8888 875713089

#define DRM_FORMAT_XRGB8888 875713112

#define DRM_FORMAT_ABGR8888 875708993

#define DRM_FORMAT_XBGR8888 875709016

/**
 * Backend type selection
 */
typedef enum BackendType {
  /**
   * Terminal/TTY backend
   */
  BACKEND_TYPE_TTY = 0,
  /**
   * Winit/wgpu GPU-accelerated backend
   */
  BACKEND_TYPE_WGPU = 1,
} BackendType;

/**
 * Type for the resize callback function pointer from C
 */
typedef void (*ResizeCallbackFn)(void *user_data, int width, int height);

/**
 * Type for mouse button callback
 */
typedef void (*MouseButtonCallbackFn)(void *user_data,
                                      double x,
                                      double y,
                                      unsigned int button,
                                      int pressed,
                                      unsigned int modifiers,
                                      unsigned int time);

/**
 * Type for mouse motion callback
 */
typedef void (*MouseMotionCallbackFn)(void *user_data,
                                      double x,
                                      double y,
                                      unsigned int modifiers,
                                      unsigned int time);

/**
 * Type for mouse scroll callback
 */
typedef void (*MouseScrollCallbackFn)(void *user_data,
                                      double x,
                                      double y,
                                      double delta_x,
                                      double delta_y,
                                      unsigned int modifiers,
                                      unsigned int time);

/**
 * Input event structure passed to C.
 */
typedef struct NeomacsInputEvent {
  uint32_t kind;
  uint32_t windowId;
  uint64_t timestamp;
  int32_t x;
  int32_t y;
  uint32_t keycode;
  uint32_t keysym;
  uint32_t modifiers;
  uint32_t button;
  float scrollDeltaX;
  float scrollDeltaY;
  uint32_t width;
  uint32_t height;
} NeomacsInputEvent;

/**
 * Event callback function type for C FFI
 */
typedef void (*EventCallback)(const struct NeomacsInputEvent*);

/**
 * Initialize the display engine
 *
 * # Safety
 * Returns a pointer to NeomacsDisplay that must be freed with neomacs_display_shutdown.
 */
struct NeomacsDisplay *neomacs_display_init(enum BackendType backend);

/**
 * Shutdown the display engine
 *
 * # Safety
 * The handle must have been returned by neomacs_display_init.
 */
void neomacs_display_shutdown(struct NeomacsDisplay *handle);

/**
 * Resize the display
 */
void neomacs_display_resize(struct NeomacsDisplay *handle, int width, int height);

/**
 * Begin building a new frame
 */
void neomacs_display_begin_frame(struct NeomacsDisplay *handle);

/**
 * Add a window to the current frame
 */
void neomacs_display_add_window(struct NeomacsDisplay *handle,
                                int windowId,
                                float x,
                                float y,
                                float width,
                                float height,
                                uint32_t bgColor,
                                int selected);

/**
 * Set cursor for a specific window
 */
void neomacs_display_set_cursor(struct NeomacsDisplay *handle,
                                int windowId,
                                float x,
                                float y,
                                float width,
                                float height,
                                int style,
                                uint32_t color,
                                int visible);

/**
 * Draw a border rectangle (for window dividers)
 */
void neomacs_display_draw_border(struct NeomacsDisplay *handle,
                                 int x,
                                 int y,
                                 int width,
                                 int height,
                                 uint32_t color);

/**
 * Begin a new glyph row for the current window
 */
void neomacs_display_begin_row(struct NeomacsDisplay *handle,
                               int y,
                               int x,
                               int height,
                               int ascent,
                               int modeLine,
                               int headerLine);

/**
 * Add a character glyph to the current row
 */
void neomacs_display_add_char_glyph(struct NeomacsDisplay *handle,
                                    uint32_t charcode,
                                    uint32_t faceId,
                                    int pixelWidth,
                                    int ascent,
                                    int descent);

/**
 * Add a stretch (whitespace) glyph to the current row
 */
void neomacs_display_add_stretch_glyph(struct NeomacsDisplay *handle,
                                       int pixelWidth,
                                       int height,
                                       uint32_t faceId);

/**
 * Add an image glyph to the current row
 */
void neomacs_display_add_image_glyph(struct NeomacsDisplay *handle,
                                     uint32_t imageId,
                                     int pixelWidth,
                                     int pixelHeight);

/**
 * End the current row
 */
void neomacs_display_end_row(struct NeomacsDisplay *handle);

/**
 * Register or update a face
 * Colors are in 0xRRGGBB format
 */
void neomacs_display_set_face(struct NeomacsDisplay *handle,
                              uint32_t faceId,
                              uint32_t foreground,
                              uint32_t background,
                              const char *fontFamily,
                              uint16_t fontWeight,
                              int isItalic,
                              int underlineStyle,
                              uint32_t underlineColor,
                              int boxType,
                              uint32_t boxColor,
                              int boxLineWidth);

/**
 * Set the frame/scene background color
 * Color is in 0xRRGGBB format
 */
void neomacs_display_set_background(struct NeomacsDisplay *handle, uint32_t color);

/**
 * Add a video glyph to the current row
 */
void neomacs_display_add_video_glyph(struct NeomacsDisplay *handle,
                                     uint32_t videoId,
                                     int pixelWidth,
                                     int pixelHeight);

/**
 * Load a video from URI (stub - video not supported without GTK4)
 */
uint32_t neomacs_display_load_video(struct NeomacsDisplay *handle, const char *uri);

/**
 * Play a loaded video (stub)
 */
int neomacs_display_video_play(struct NeomacsDisplay *handle, uint32_t videoId);

/**
 * Pause a video (stub)
 */
int neomacs_display_video_pause(struct NeomacsDisplay *handle, uint32_t videoId);

/**
 * Stop a video (stub)
 */
int neomacs_display_video_stop(struct NeomacsDisplay *handle, uint32_t videoId);

/**
 * Set video loop mode (stub)
 */
int neomacs_display_video_set_loop(struct NeomacsDisplay *handle, uint32_t videoId, int loopCount);

/**
 * Update video frame (stub)
 */
int neomacs_display_video_update(struct NeomacsDisplay *handle, uint32_t videoId);

/**
 * Load an image from a file path (stub)
 */
uint32_t neomacs_display_load_image(struct NeomacsDisplay *handle, const char *path);

/**
 * Load an image from raw bytes (stub)
 */
uint32_t neomacs_display_load_image_data(struct NeomacsDisplay *handle,
                                         const uint8_t *data,
                                         uintptr_t len);

/**
 * Load an image from raw bytes with optional scaling (stub)
 */
uint32_t neomacs_display_load_image_data_scaled(struct NeomacsDisplay *handle,
                                                const uint8_t *data,
                                                uintptr_t len,
                                                int maxWidth,
                                                int maxHeight);

/**
 * Load an image from raw ARGB32 pixel data (stub)
 */
uint32_t neomacs_display_load_image_argb32(struct NeomacsDisplay *handle,
                                           const uint8_t *data,
                                           int width,
                                           int height,
                                           int stride);

/**
 * Load an image from raw RGB24 pixel data (stub)
 */
uint32_t neomacs_display_load_image_rgb24(struct NeomacsDisplay *handle,
                                          const uint8_t *data,
                                          int width,
                                          int height,
                                          int stride);

/**
 * Load an image from a file path (stub)
 */
uint32_t neomacs_display_load_image_file(struct NeomacsDisplay *handle, const char *path);

/**
 * Load an image from a file path with scaling (stub)
 */
uint32_t neomacs_display_load_image_file_scaled(struct NeomacsDisplay *handle,
                                                const char *path,
                                                int maxWidth,
                                                int maxHeight);

/**
 * Load an image directly as texture (stub)
 */
uint32_t neomacs_display_load_image_file_direct(struct NeomacsDisplay *handle, const char *path);

/**
 * Load an image directly as texture with scaling (stub)
 */
uint32_t neomacs_display_load_image_file_direct_scaled(struct NeomacsDisplay *handle,
                                                       const char *path,
                                                       int maxWidth,
                                                       int maxHeight);

/**
 * Get image dimensions (stub)
 */
int neomacs_display_get_image_size(struct NeomacsDisplay *handle,
                                   uint32_t imageId,
                                   int *width,
                                   int *height);

/**
 * Query image file dimensions without loading (stub)
 */
int neomacs_display_query_image_file_size(struct NeomacsDisplay *handle,
                                          const char *path,
                                          int *width,
                                          int *height);

/**
 * Free an image from cache (stub)
 */
int neomacs_display_free_image(struct NeomacsDisplay *handle, uint32_t imageId);

/**
 * Set a floating video at a specific screen position
 */
void neomacs_display_set_floating_video(struct NeomacsDisplay *handle,
                                        uint32_t videoId,
                                        int x,
                                        int y,
                                        int width,
                                        int height);

/**
 * Remove a floating video
 */
void neomacs_display_clear_floating_video(struct NeomacsDisplay *handle, uint32_t videoId);

/**
 * Set a floating image at a specific screen position
 */
void neomacs_display_set_floating_image(struct NeomacsDisplay *handle,
                                        uint32_t imageId,
                                        int x,
                                        int y,
                                        int width,
                                        int height);

/**
 * Remove a floating image
 */
void neomacs_display_clear_floating_image(struct NeomacsDisplay *handle, uint32_t imageId);

/**
 * Clear a rectangular area of the display
 */
void neomacs_display_clear_area(struct NeomacsDisplay *handle, int x, int y, int width, int height);

/**
 * Clear all glyphs - used when frame layout changes
 */
void neomacs_display_clear_all_glyphs(struct NeomacsDisplay *handle);

/**
 * Clear all cursors
 */
void neomacs_display_clear_all_cursors(struct NeomacsDisplay *handle);

/**
 * Clear all borders (window dividers)
 */
void neomacs_display_clear_all_borders(struct NeomacsDisplay *handle);

/**
 * End frame and render
 * Returns 0 on success, 1 if layout changed, -1 on error
 */
int neomacs_display_end_frame(struct NeomacsDisplay *handle);

/**
 * Render the scene to an external Cairo context (stub)
 */
int neomacs_display_render_to_cairo(struct NeomacsDisplay *handle, void *cairoContext);

/**
 * Initialize the renderer with a Pango context (stub)
 */
void neomacs_display_init_pango(struct NeomacsDisplay *handle, void *pangoContext);

/**
 * Enable or disable GSK rendering (stub)
 */
void neomacs_display_set_gsk_enabled(struct NeomacsDisplay *handle, int enabled);

/**
 * Start smooth scroll animation
 */
void neomacs_display_smooth_scroll(struct NeomacsDisplay *handle,
                                   int windowId,
                                   float fromOffset,
                                   float toOffset);

/**
 * Reset cursor blink (call when cursor moves)
 */
void neomacs_display_reset_cursor_blink(struct NeomacsDisplay *handle);

/**
 * Check if animations are active
 */
int neomacs_display_has_animations(struct NeomacsDisplay *handle);

/**
 * Get backend name
 */
const char *neomacs_display_backend_name(struct NeomacsDisplay *handle);

/**
 * Check if backend is initialized
 */
int neomacs_display_is_initialized(struct NeomacsDisplay *handle);

/**
 * Create a GPU-accelerated NeomacsWidget (stub)
 */
void *neomacs_display_create_widget(void);

/**
 * Set the scene on a NeomacsWidget (stub)
 */
int neomacs_display_widget_set_scene(struct NeomacsDisplay *handle, void *widget);

/**
 * Initialize the GSK renderer's Pango context from a NeomacsWidget (stub)
 */
void neomacs_display_widget_init_pango(struct NeomacsDisplay *handle, void *widget);

/**
 * Render scene to a NeomacsWidget (stub)
 */
int neomacs_display_render_to_widget(struct NeomacsDisplay *handle, void *widget);

/**
 * Set the resize callback (stub)
 */
void neomacs_display_set_resize_callback(ResizeCallbackFn callback, void *userData);

/**
 * Set the mouse button callback (stub)
 */
void neomacs_display_set_mouse_button_callback(MouseButtonCallbackFn callback, void *userData);

/**
 * Set the mouse motion callback (stub)
 */
void neomacs_display_set_mouse_motion_callback(MouseMotionCallbackFn callback, void *userData);

/**
 * Set the mouse scroll callback (stub)
 */
void neomacs_display_set_mouse_scroll_callback(MouseScrollCallbackFn callback, void *userData);

/**
 * Set callback for WebKit new window/tab requests
 */
void neomacs_display_webkit_set_new_window_callback(bool (*callback)(uint32_t,
                                                                     const char*,
                                                                     const char*));

/**
 * Set callback for WebKit page load events
 */
void neomacs_display_webkit_set_load_callback(void (*callback)(uint32_t, int, const char*));

/**
 * Initialize WebKit subsystem with EGL display
 */
int neomacs_display_webkit_init(struct NeomacsDisplay *handle, void *eglDisplay);

/**
 * Create a new WebKit view
 */
uint32_t neomacs_display_webkit_create(struct NeomacsDisplay *handle, int width, int height);

/**
 * Destroy a WebKit view
 */
int neomacs_display_webkit_destroy(struct NeomacsDisplay *handle, uint32_t viewId);

/**
 * Load a URI in a WebKit view
 */
int neomacs_display_webkit_load_uri(struct NeomacsDisplay *handle,
                                    uint32_t viewId,
                                    const char *uri);

/**
 * Go back in a WebKit view
 */
int neomacs_display_webkit_go_back(struct NeomacsDisplay *handle, uint32_t viewId);

/**
 * Go forward in a WebKit view
 */
int neomacs_display_webkit_go_forward(struct NeomacsDisplay *handle, uint32_t viewId);

/**
 * Reload a WebKit view
 */
int neomacs_display_webkit_reload(struct NeomacsDisplay *handle, uint32_t viewId);

/**
 * Resize a WebKit view
 */
int neomacs_display_webkit_resize(struct NeomacsDisplay *handle,
                                  uint32_t viewId,
                                  int width,
                                  int height);

/**
 * Execute JavaScript in a WebKit view
 */
int neomacs_display_webkit_execute_js(struct NeomacsDisplay *handle,
                                      uint32_t viewId,
                                      const char *script);

/**
 * Set a floating WebKit view position and size
 */
void neomacs_display_set_floating_webkit(struct NeomacsDisplay *handle,
                                         uint32_t webkitId,
                                         int x,
                                         int y,
                                         int width,
                                         int height);

/**
 * Hide a floating WebKit view
 */
void neomacs_display_hide_floating_webkit(struct NeomacsDisplay *handle, uint32_t webkitId);

/**
 * Find which floating webkit view is at the given coordinates
 */
int neomacs_display_webkit_at_position(struct NeomacsDisplay *handle,
                                       int x,
                                       int y,
                                       uint32_t *outWebkitId,
                                       int *outRelX,
                                       int *outRelY);

/**
 * Send keyboard event to WebKit view
 */
void neomacs_display_webkit_send_key(struct NeomacsDisplay *handle,
                                     uint32_t webkitId,
                                     uint32_t keyCode,
                                     uint32_t hardwareKeyCode,
                                     int pressed,
                                     uint32_t modifiers);

/**
 * Send pointer/mouse event to WebKit view
 */
void neomacs_display_webkit_send_pointer(struct NeomacsDisplay *handle,
                                         uint32_t webkitId,
                                         uint32_t eventType,
                                         int x,
                                         int y,
                                         uint32_t button,
                                         uint32_t state,
                                         uint32_t modifiers);

/**
 * Send scroll event to WebKit view
 */
void neomacs_display_webkit_send_scroll(struct NeomacsDisplay *handle,
                                        uint32_t webkitId,
                                        int x,
                                        int y,
                                        int deltaX,
                                        int deltaY);

/**
 * Click in WebKit view (convenience function)
 */
void neomacs_display_webkit_click(struct NeomacsDisplay *handle,
                                  uint32_t webkitId,
                                  int x,
                                  int y,
                                  uint32_t button);

/**
 * Get WebKit view title
 */
char *neomacs_display_webkit_get_title(struct NeomacsDisplay *handle, uint32_t webkitId);

/**
 * Get WebKit view URL
 */
char *neomacs_display_webkit_get_url(struct NeomacsDisplay *handle, uint32_t webkitId);

/**
 * Get WebKit view loading progress
 */
double neomacs_display_webkit_get_progress(struct NeomacsDisplay *handle, uint32_t webkitId);

/**
 * Check if WebKit view is loading
 */
int neomacs_display_webkit_is_loading(struct NeomacsDisplay *handle, uint32_t webkitId);

/**
 * Free a string returned by webkit_get_title or webkit_get_url
 */
void neomacs_display_webkit_free_string(char *s);

/**
 * Add a WPE glyph to the current row
 */
void neomacs_display_add_wpe_glyph(struct NeomacsDisplay *handle,
                                   uint32_t viewId,
                                   int pixelWidth,
                                   int pixelHeight);

/**
 * Create a new window with the specified dimensions and title.
 *
 * Returns the window ID if successful, or 0 if creation failed.
 */
uint32_t neomacs_display_create_window(struct NeomacsDisplay *handle,
                                       int32_t width,
                                       int32_t height,
                                       const char *title);

/**
 * Destroy a window by its ID.
 */
void neomacs_display_destroy_window(struct NeomacsDisplay *handle, uint32_t windowId);

/**
 * Show or hide a window.
 */
void neomacs_display_show_window(struct NeomacsDisplay *handle, uint32_t windowId, bool visible);

/**
 * Set the title of a window.
 */
void neomacs_display_set_window_title(struct NeomacsDisplay *handle,
                                      uint32_t windowId,
                                      const char *title);

/**
 * Set the size of a window.
 */
void neomacs_display_set_window_size(struct NeomacsDisplay *handle,
                                     uint32_t windowId,
                                     int32_t width,
                                     int32_t height);

/**
 * Set the event callback function.
 *
 * The callback will be invoked for each input event when polling.
 */
void neomacs_display_set_event_callback(EventCallback callback);

/**
 * Poll for input events and invoke the callback for each event.
 *
 * Returns the number of events processed.
 */
int32_t neomacs_display_poll_events(struct NeomacsDisplay *handle);

/**
 * Set an animation configuration option (stub)
 */
int neomacs_display_set_animation_option(struct NeomacsDisplay *handle,
                                         const char *key,
                                         const char *value);

/**
 * Get an animation configuration option (stub)
 */
char *neomacs_display_get_animation_option(struct NeomacsDisplay *handle, const char *key);

/**
 * Free a string returned by neomacs_display_get_animation_option
 */
void neomacs_display_free_string(char *s);

/**
 * Update cursor animation state (stub)
 */
int neomacs_display_update_animation(struct NeomacsDisplay *handle, double dt);

/**
 * Check if animation needs continuous redraw (stub)
 */
int neomacs_display_animation_active(struct NeomacsDisplay *handle);

/**
 * Trigger a buffer transition animation (stub)
 */
int neomacs_display_start_buffer_transition(struct NeomacsDisplay *handle,
                                            const char *effect,
                                            int durationMs);

/**
 * Prepare for buffer transition (stub)
 */
int neomacs_display_prepare_buffer_transition(struct NeomacsDisplay *handle);

/**
 * Trigger buffer transition animation (stub)
 */
int neomacs_display_trigger_buffer_transition(struct NeomacsDisplay *handle);

/**
 * Check if buffer transition is ready (stub)
 */
int neomacs_display_has_transition_snapshot(struct NeomacsDisplay *handle);

#endif  /* NEOMACS_DISPLAY_H */
