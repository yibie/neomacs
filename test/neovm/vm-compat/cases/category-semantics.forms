; category table predicates and set creation
(category-table-p t)
(category-table-p nil)
(let ((v (make-category-set "aZ1")))
  (list (if (aref v ?a) t nil)
        (if (aref v ?Z) t nil)
        (if (aref v ?1) t nil)
        (if (aref v ?b) t nil)))

; define/retrieve category docstring
(define-category ?Q "qa")
(category-docstring ?Q)

; add and remove category assignment for a character
(modify-category-entry ?x ?Q)
(let ((s (char-category-set ?x))) (if (aref s ?Q) t nil))
(modify-category-entry ?x ?Q nil t)
(let ((s (char-category-set ?x))) (if (aref s ?Q) t nil))

; unused category should produce a character
(characterp (get-unused-category))

; invalid category letters should signal errors
(condition-case err (define-category ?1 "bad") (error err))
(condition-case err (modify-category-entry ?x ?1) (error err))
