(fboundp 'replace-regexp)
(with-temp-buffer
  (insert "Foo 123 foo")
  (goto-char (point-min))
  (replace-regexp "foo" "bar")
  (buffer-string))
(with-temp-buffer
  (insert "a1 b2 c3")
  (goto-char (point-min))
  (replace-regexp "[0-9]" "x" nil 4 8)
  (buffer-string))
(with-temp-buffer
  (insert "abc")
  (goto-char (point-min))
  (replace-regexp "z" "x")
  (point))
(with-temp-buffer
  (insert "abc")
  (goto-char (point-min))
  (replace-regexp "" "x")
  (buffer-string))
(condition-case err (replace-regexp "a") (wrong-number-of-arguments (car err)))
(condition-case err (replace-regexp 1 "x") (error err))
(condition-case err (replace-regexp "[" "x") (invalid-regexp (car err)))
