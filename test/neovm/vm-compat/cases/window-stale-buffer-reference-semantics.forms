(fboundp 'generate-new-buffer)
(fboundp 'set-window-buffer)
(fboundp 'split-window)
(fboundp 'kill-buffer)
(fboundp 'window-buffer)
(fboundp 'window-start)
(fboundp 'window-point)
(fboundp 'window-end)
(fboundp 'switch-to-buffer)
(condition-case err
    (let ((b (generate-new-buffer "stale-win-buf")))
      (set-window-buffer nil b)
      (kill-buffer b)
      (list (window-buffer) (window-start) (window-point) (window-end)))
  (error err))
(condition-case err
    (let ((b (generate-new-buffer "stale-get-window"))
          (w (split-window)))
      (set-window-buffer w b)
      (kill-buffer b)
      (window-buffer w))
  (error err))
(condition-case err
    (let ((b (generate-new-buffer "stale-deleted-switch")))
      (switch-to-buffer b)
      (kill-buffer b)
      (window-buffer))
  (error err))
