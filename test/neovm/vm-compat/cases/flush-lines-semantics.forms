(fboundp 'flush-lines)
(with-temp-buffer
  (insert (concat "a" (string 10) "bb" (string 10) "c" (string 10)))
  (goto-char (point-max))
  (flush-lines "b")
  (list (point) (split-string (buffer-string) (string 10) t)))
(with-temp-buffer
  (insert (concat "a" (string 10) "bb" (string 10) "c" (string 10)))
  (goto-char (point-min))
  (flush-lines "b")
  (list (point) (split-string (buffer-string) (string 10) t)))
(with-temp-buffer
  (insert (concat "aa" (string 10) "bb" (string 10) "cc" (string 10) "dd" (string 10)))
  (goto-char (point-min))
  (flush-lines "b" 4 10)
  (split-string (buffer-string) (string 10) t))
(condition-case err (flush-lines) (wrong-number-of-arguments (car err)))
(condition-case err (flush-lines 1) (error err))
(condition-case err (flush-lines "[a-") (invalid-regexp (car err)))
