(with-temp-buffer
  (insert (concat "a" (char-to-string 9) "b"))
  (goto-char (point-min))
  (let ((replace-lax-whitespace nil))
    (replace-string "a b" "X"))
  (equal (buffer-string) "X"))

(with-temp-buffer
  (insert (concat "a" (char-to-string 9) "b"))
  (goto-char (point-min))
  (let ((replace-lax-whitespace t))
    (replace-string "a b" "X"))
  (equal (buffer-string) "X"))

(with-temp-buffer
  (insert (concat "a" (char-to-string 9) "b"))
  (goto-char (point-min))
  (let ((replace-lax-whitespace nil)
        (unread-command-events (list ?!)))
    (query-replace "a b" "X"))
  (equal (buffer-string) "X"))

(with-temp-buffer
  (insert (concat "a" (char-to-string 9) "b"))
  (goto-char (point-min))
  (let ((replace-lax-whitespace t)
        (unread-command-events (list ?!)))
    (query-replace "a b" "X"))
  (equal (buffer-string) "X"))
