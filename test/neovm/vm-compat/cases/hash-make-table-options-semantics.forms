; make-hash-table option parsing and metadata accessor semantics.
(hash-table-test (make-hash-table))
(hash-table-test (make-hash-table :test 'eq))
(hash-table-test (make-hash-table :test 'equal))

(condition-case err (make-hash-table :test 'foo) (error err))
(condition-case err (make-hash-table :test nil) (error err))
(condition-case err (make-hash-table :test t) (error err))
(condition-case err (make-hash-table :test "eq") (error err))
(condition-case err (make-hash-table :test 1) (error err))

(hash-table-size (make-hash-table))
(hash-table-size (make-hash-table :size 13))
(hash-table-size (make-hash-table :size nil))
(condition-case err (make-hash-table :size -1) (error err))
(condition-case err (make-hash-table :size 1.5) (error err))
(condition-case err (make-hash-table :size "10") (error err))
(condition-case err (make-hash-table :size t) (error err))

(hash-table-weakness (make-hash-table))
(hash-table-weakness (make-hash-table :weakness nil))
(hash-table-weakness (make-hash-table :weakness 'key))
(hash-table-weakness (make-hash-table :weakness 'value))
(hash-table-weakness (make-hash-table :weakness 'key-or-value))
(hash-table-weakness (make-hash-table :weakness 'key-and-value))
(hash-table-weakness (make-hash-table :weakness t))
(condition-case err (make-hash-table :weakness 'foo) (error err))
(condition-case err (make-hash-table :weakness :foo) (error err))
(condition-case err (make-hash-table :weakness "key") (error err))
(condition-case err (make-hash-table :weakness 1) (error err))

(condition-case err (make-hash-table :test 'eq :test 'equal) (error err))
(condition-case err (make-hash-table :size 3 :size 4) (error err))
(condition-case err (make-hash-table :weakness 'key :weakness nil) (error err))

(condition-case err (make-hash-table :test) (error err))
(condition-case err (make-hash-table :size) (error err))
(condition-case err (make-hash-table :weakness) (error err))

(condition-case err (make-hash-table :foo 1) (error err))
(condition-case err (make-hash-table :foo) (error err))
(condition-case err (make-hash-table 1) (error err))

(hash-table-test (make-hash-table :rehash-size :test 'eq))
(hash-table-test (make-hash-table :rehash-threshold :test 'equal))
(hash-table-size (make-hash-table :rehash-size :size 9))
(hash-table-size (make-hash-table :rehash-threshold :size 11))
(hash-table-test (make-hash-table :rehash-size :foo))
(hash-table-test (make-hash-table :rehash-threshold :foo))
(hash-table-test (make-hash-table :rehash-size 2.0 :test 'eq))
(hash-table-test (make-hash-table :rehash-threshold 0.75 :test 'equal))
(condition-case err (make-hash-table :size :test 'eq) (error err))
(condition-case err (make-hash-table :test :size) (error err))
(condition-case err (make-hash-table :weakness :size) (error err))
