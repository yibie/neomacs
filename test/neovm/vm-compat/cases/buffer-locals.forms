; Buffer-local assignment must not overwrite default values.
(setq my-var 10)
(local-variable-p 'my-var)
(with-temp-buffer (local-variable-p 'my-var (current-buffer)))
(with-temp-buffer
  (make-local-variable 'my-var)
  (local-variable-p 'my-var))
(with-temp-buffer
  (set (make-local-variable 'my-var) 99)
  my-var)
(default-value 'my-var)
(with-temp-buffer
  (setq my-var 22)
  (list my-var (default-value 'my-var)))
(set-default 'my-var 33)
(list my-var (default-value 'my-var))
