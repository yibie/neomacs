1	(with-temp-buffer (insert "foo bar") (goto-char (point-min)) (re-search-forward "\\(foo\\)") (replace-match "baz") (buffer-string))	OK "baz bar"
2	(with-temp-buffer (insert "foo bar") (goto-char (point-min)) (re-search-forward "\\(foo\\)") (replace-match "\\1Z" nil nil) (buffer-string))	OK "fooZ bar"
3	(with-temp-buffer (insert "foo bar") (goto-char (point-min)) (re-search-forward "\\(foo\\)") (replace-match "\\1Z" nil t) (buffer-string))	OK "\\1Z bar"
4	(with-temp-buffer (insert "FOO bar") (goto-char (point-min)) (re-search-forward "FOO") (replace-match "baz" nil nil) (buffer-string))	OK "BAZ bar"
5	(with-temp-buffer (insert "Foo bar") (goto-char (point-min)) (re-search-forward "Foo") (replace-match "baz" nil nil) (buffer-string))	OK "Baz bar"
6	(with-temp-buffer (insert "Foo bar") (goto-char (point-min)) (re-search-forward "Foo") (replace-match "baz" t nil) (buffer-string))	OK "baz bar"
7	(with-temp-buffer (insert "abc123") (goto-char (point-min)) (re-search-forward "\\([a-z]+\\)\\([0-9]+\\)") (replace-match "X" nil nil nil 2) (buffer-string))	OK "abcX"
8	(with-temp-buffer (insert "abc123") (goto-char (point-min)) (re-search-forward "\\([a-z]+\\)\\([0-9]+\\)") (replace-match "X" nil nil nil 0) (buffer-string))	OK "X"
9	(with-temp-buffer (insert "123") (goto-char (point-min)) (re-search-forward "\\([a-z]+\\)?\\([0-9]+\\)") (condition-case err (replace-match "X" nil nil nil 1) (error (list (car err) (car (cdr err))))))	OK (error "replace-match subexpression does not exist")
10	(with-temp-buffer (insert "123") (goto-char (point-min)) (re-search-forward "\\([a-z]+\\)?\\([0-9]+\\)") (condition-case err (replace-match "X" nil nil nil 9) (error (list (car err) (car (cdr err))))))	OK (args-out-of-range 9)
11	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "X" nil nil s 2))	OK "abcX"
12	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "\\1X" nil nil s 2))	OK "abcabcX"
13	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "\\1X" nil t s 2))	OK "abc\\1X"
14	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "Z" nil nil s 0))	OK "Z"
15	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "Z" nil nil s 1))	OK "Z123"
16	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (replace-match "Z" nil nil s 2))	OK "abcZ"
17	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (condition-case err (replace-match "Z" nil nil s 3) (error (list (car err) (car (cdr err))))))	OK (error "replace-match subexpression does not exist")
18	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (condition-case err (replace-match "Z" nil nil s -1) (error (list (car err) (cdr err)))))	OK (args-out-of-range (-1 0 6))
19	(let ((s "abc")) (condition-case err (replace-match "Z" nil nil s 0) (error (list (car err) (car (cdr err))))))	OK (args-out-of-range 0)
20	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z") (error (list (car err) (car (cdr err))))))	OK (args-out-of-range 0)
21	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z" nil nil "abc") (error (list (car err) (car (cdr err))))))	OK (args-out-of-range 0)
22	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match 123) (error (list (car err) (car (cdr err))))))	OK (wrong-type-argument stringp)
23	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z" nil nil 5) (error (list (car err) (car (cdr err))))))	OK (wrong-type-argument stringp)
24	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z" nil nil nil "x") (error (list (car err) (car (cdr err))))))	OK (wrong-type-argument integerp)
25	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z" nil nil nil -1) (error (list (car err) (car (cdr err))))))	OK (args-out-of-range -1)
26	(with-temp-buffer (insert "abc") (goto-char (point-min)) (condition-case err (replace-match "Z" nil nil nil 0 1 2) (error (list (car err) (car (cdr err))))))	OK (wrong-number-of-arguments replace-match)
27	(let ((s "x")) (string-match "x" s) (replace-match "é" nil nil s))	OK "é"
28	(let ((s "x")) (string-match "x" s) (replace-match "éz" nil nil s))	OK "éz"
29	(let ((s "x")) (string-match "x" s) (replace-match "\\&é" nil nil s))	OK "xé"
30	(let ((s "x")) (string-match "\\(x\\)" s) (replace-match "\\1é" nil nil s))	OK "xé"
31	(let ((s "abc123")) (string-match "\\([a-z]+\\)\\([0-9]+\\)" s) (condition-case err (replace-match "Z" nil nil s 9) (error err)))	OK (args-out-of-range 9 0 6)
32	(with-temp-buffer (insert "abc123") (goto-char (point-min)) (re-search-forward "\\([a-z]+\\)\\([0-9]+\\)") (condition-case err (replace-match "Z" nil nil nil 9) (error err)))	OK (args-out-of-range 9 0 6)
