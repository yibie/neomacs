; make-directory argument validation and parents semantics.

(condition-case err
    (make-directory 1)
  (error err))

(condition-case err
    (make-directory)
  (error err))

(condition-case err
    (make-directory "a" nil nil)
  (error err))

(let* ((base (make-temp-file "neovm-make-directory-" t))
       (d1 (expand-file-name "a/b" base))
       (d2 (expand-file-name "c" base)))
  (prog1
      (list (condition-case err
                (make-directory d1)
              (error (car err)))
            (make-directory d1 t)
            (file-directory-p d1)
            (make-directory d2)
            (file-directory-p d2))
    (delete-directory base t)))

(let ((base (make-temp-file "neovm-make-directory-eval-" t)))
  (prog1
      (let ((default-directory (file-name-as-directory base)))
        (list (make-directory "x/y" t)
              (file-directory-p "x/y")))
    (delete-directory base t)))
