(setq bookmark-default-file "/tmp/neovm-bookmark-default-semantics")
(ignore-errors (delete-file bookmark-default-file))
(ignore-errors (delete-file "/tmp/neovm-bookmark-save-load-semantics"))

(defun bm-save-shape (v)
  (if (and (listp v) (= (length v) 5))
      (list 'list5 (stringp (nth 0 v)) (integerp (nth 1 v)) (integerp (nth 2 v)) (integerp (nth 3 v)) (integerp (nth 4 v)))
    v))

(condition-case err (bm-save-shape (bookmark-save "x")) (error err))
(condition-case err (bm-save-shape (bookmark-save nil "/tmp/neovm-bookmark-save-load-semantics")) (error err))
(condition-case err (bm-save-shape (bookmark-save nil "/tmp/neovm-bookmark-save-load-semantics" t)) (error err))
(condition-case err (bm-save-shape (bookmark-save nil t t)) (error err))
(condition-case err (bm-save-shape (bookmark-save nil nil nil nil)) (error err))
(condition-case err (bm-save-shape (apply 'bookmark-save '(nil nil nil))) (error err))
(condition-case err (bm-save-shape (apply 'bookmark-save '(nil nil nil nil))) (error err))

(condition-case err (bookmark-load "/tmp/neovm-bookmark-save-load-semantics") (error err))
(condition-case err (bookmark-load "/tmp/neovm-bookmark-save-load-semantics" nil t) (error err))
(condition-case err (bookmark-load "/tmp/does-not-exist-neovm-bookmark-save-load-semantics") (error err))
(condition-case err (bookmark-load nil) (error err))
(condition-case err (bookmark-load nil nil nil nil) (error err))
(condition-case err (bookmark-load nil nil nil nil nil) (error err))
(condition-case err (funcall 'bookmark-load) (error err))
(condition-case err (apply 'bookmark-load '(nil)) (error err))
(condition-case err (apply 'bookmark-load '(nil nil nil nil nil)) (error err))
