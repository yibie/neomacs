; thread and mutex callable/introspection compatibility
(fboundp 'thread-live-p)
(fboundp 'thread-alive-p)
(fboundp 'threadp)
(fboundp 'current-thread)
(fboundp 'all-threads)
(fboundp 'thread-join)
(fboundp 'thread-name)
(fboundp 'thread-last-error)
(fboundp 'thread-signal)
(fboundp 'thread-yield)
(fboundp 'make-mutex)
(fboundp 'mutexp)
(fboundp 'mutex-name)
(fboundp 'mutex-lock)
(fboundp 'mutex-unlock)
(fboundp 'with-mutex)
(fboundp 'make-condition-variable)
(fboundp 'condition-variable-p)
(fboundp 'condition-wait)
(fboundp 'condition-notify)
(threadp 0)
(threadp (current-thread))
(threadp (car (all-threads)))
(mutexp 1)
(condition-variable-p 1)
(let ((m (make-mutex))) (mutexp m))
(let ((m (make-mutex)))
  (let ((cv (make-condition-variable m)))
    (condition-variable-p cv)))
(symbol-function 'thread-live-p)
(condition-case err (symbol-function 'thread-alive-p) (error (car err)))
(functionp 'thread-live-p)
(functionp 'with-mutex)
(special-form-p 'with-mutex)
(macrop 'with-mutex)
(condition-case err (thread-name) (error (car err)))
(condition-case err (thread-name 1 2) (error (car err)))
(condition-case err (make-mutex 1 2) (error (car err)))
(condition-case err (mutex-name) (error (car err)))
(condition-case err (mutex-name 1 2) (error (car err)))
(condition-case err (mutex-name 1) (error (car err)))
(condition-case err (condition-wait) (error (car err)))
(condition-case err (condition-wait 1) (error (car err)))
(condition-case err (condition-wait 1 2 3) (error (car err)))
(condition-case err (condition-notify) (error (car err)))
(condition-case err (condition-notify 1 2 3) (error (car err)))
