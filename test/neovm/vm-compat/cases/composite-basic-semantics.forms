(fboundp 'compose-region-internal)
(fboundp 'compose-string-internal)
(fboundp 'find-composition-internal)
(fboundp 'composition-get-gstring)
(fboundp 'clear-composition-cache)
(fboundp 'composition-sort-rules)
(fboundp 'auto-composition-mode)

(stringp (compose-string-internal "abc" 0 3))
(equal (compose-string-internal "abc" 0 0) "abc")
(condition-case err (compose-string-internal "abc" 2 1) (error err))
(condition-case err (compose-string-internal "abc" 0 4) (error err))
(condition-case err (compose-string-internal "abc" -1 1) (error err))
(condition-case err (compose-string-internal 1 0 1) (error err))
(condition-case err (compose-string-internal "abc" 'x 1) (error err))
(condition-case err (compose-string-internal "abc" 0 'y) (error err))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 1 3))
  (error (car err)))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 'x 2))
  (error err))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 1 'y))
  (error err))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 5 1))
  (error (car err)))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 0 0))
  (error (car err)))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal 0 4))
  (error (car err)))
(condition-case err
    (with-temp-buffer (insert "abc") (compose-region-internal -1 1))
  (error (car err)))
(condition-case err (compose-region-internal 1) (error (car err)))

(condition-case err (find-composition-internal 1 nil nil nil) (error (car err)))
(condition-case err (find-composition-internal 'x nil nil nil) (error err))
(condition-case err (find-composition-internal 1 'y nil nil) (error err))
(condition-case err (find-composition-internal 1 nil 1 nil) (error err))
(condition-case err (find-composition-internal 0 nil nil nil) (error (car err)))
(condition-case err (find-composition-internal -1 nil nil nil) (error (car err)))
(condition-case err (find-composition-internal 1) (error (car err)))

(condition-case err (composition-get-gstring 'x 1 nil "ab") (error err))
(condition-case err (composition-get-gstring 0 'y nil "ab") (error err))
(condition-case err (composition-get-gstring 0 1 nil 1) (error err))
(vectorp (composition-get-gstring 0 1 nil "ab"))
(let ((v (composition-get-gstring 0 1 nil "ab"))) (vectorp (aref v 0)))
(condition-case err (composition-get-gstring 2 1 nil "ab") (error err))
(condition-case err (composition-get-gstring 0 0 nil "ab") (error err))
(condition-case err (composition-get-gstring -1 1 nil "ab") (error err))
(condition-case err (composition-get-gstring 0 3 nil "ab") (error err))
(condition-case err (composition-get-gstring 3 3 nil "ab") (error err))
(condition-case err (composition-get-gstring 0 1 nil "ab" nil) (error (car err)))

(condition-case err (clear-composition-cache) (error (car err)))
(condition-case err (clear-composition-cache nil) (error (car err)))

(condition-case err (composition-sort-rules nil) (error err))
(condition-case err (composition-sort-rules [1 2]) (error err))
(condition-case err (composition-sort-rules '(3 2 1)) (error err))

(condition-case err (auto-composition-mode) (error (car err)))
(condition-case err (auto-composition-mode t) (error (car err)))
(condition-case err (auto-composition-mode nil nil) (error (car err)))
