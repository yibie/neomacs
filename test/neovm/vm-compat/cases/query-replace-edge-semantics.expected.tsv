1	(with-temp-buffer (insert "cat scatter cat") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace "cat" "dog" t)) (buffer-string))	OK "dog scatter dog"
2	(with-temp-buffer (insert "cat scatter cat") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace-regexp "cat" "dog" t)) (buffer-string))	OK "dog scatter dog"
3	(with-temp-buffer (insert "Foo foo") (let ((case-fold-search nil) (unread-command-events (list 33))) (query-replace "foo" "bar")) (buffer-string))	OK "Foo foo"
4	(with-temp-buffer (insert "a1 b22 c333") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace-regexp "\\([0-9]+\\)" "[\\1]")) (buffer-string))	OK "a[1] b[22] c[333]"
5	(with-temp-buffer (insert "foo foo foo") (goto-char (point-max)) (let ((unread-command-events (list 33))) (query-replace "foo" "bar" nil nil nil t)) (list (buffer-string) (point)))	OK ("bar bar bar" 1)
6	(with-temp-buffer (insert "foo foo foo") (goto-char (point-max)) (let ((unread-command-events (list 33))) (query-replace-regexp "foo" "bar" nil nil nil t)) (list (buffer-string) (point)))	OK ("bar bar bar" 1)
7	(with-temp-buffer (insert "abc") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace-regexp "" "x")) (list (buffer-string) (point)))	OK ("xaxbxc" 6)
8	(with-temp-buffer (insert "abc") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace "" "x" nil 2 3)) (list (buffer-string) (point)))	OK ("axbc" 3)
9	(with-temp-buffer (insert "cat scatter cat") (goto-char (point-min)) (let ((unread-command-events (list 33))) (query-replace-regexp "cat" "dog" nil 5 1)) (list (buffer-string) (point)))	OK ("dog scatter cat" 4)
10	(condition-case err (with-temp-buffer (insert "x") (let ((unread-command-events (list 33))) (query-replace-regexp "[a-" "b"))) (invalid-regexp (car err)))	OK nil
11	(with-temp-buffer (insert "foo foo") (goto-char 5) (set-mark 1) (let ((unread-command-events (list 33))) (query-replace "foo" "bar" nil nil nil nil t)) (list (buffer-string) (point)))	OK ("foo foo" 8)
12	(with-temp-buffer (insert "foo foo") (goto-char 5) (set-mark 1) (let ((unread-command-events (list 33))) (query-replace-regexp "foo" "bar" nil nil nil t t)) (list (buffer-string) (point)))	OK ("bar foo" 1)
