; Lock in user identity builtin contracts and optional argument behavior.
(fboundp 'user-login-name)
(fboundp 'user-real-login-name)
(fboundp 'user-full-name)
(fboundp 'user-real-uid)
(fboundp 'group-gid)

(stringp (user-login-name))
(stringp (user-real-login-name))
(stringp (user-full-name))
(integerp (user-real-uid))
(integerp (group-gid))
(>= (user-real-uid) 0)
(>= (group-gid) 0)

(let ((uid (user-real-uid)))
  (or (null (user-login-name uid))
      (stringp (user-login-name uid))))

(let ((name (user-login-name)))
  (or (null (user-full-name name))
      (stringp (user-full-name name))))

(let ((uid (user-real-uid)))
  (or (null (user-full-name uid))
      (stringp (user-full-name uid))))

(let ((uid -1))
  (or (null (user-login-name uid))
      (stringp (user-login-name uid))))

(let ((uid -1))
  (or (null (user-full-name uid))
      (stringp (user-full-name uid))))

(condition-case err (user-login-name "root") (error (car err)))
(condition-case err (user-real-login-name nil) (error (car err)))
(condition-case err (user-full-name '(x)) (error (car err)))
(condition-case err (user-login-name nil nil) (error (car err)))
(condition-case err (user-full-name nil nil) (error (car err)))
