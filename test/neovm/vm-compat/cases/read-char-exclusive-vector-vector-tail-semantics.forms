(condition-case err
    (progn
      (setq unread-command-events (list [foo] [bar]))
      (read-char-exclusive nil nil 0))
  (error (list (car err) unread-command-events)))

(let ((unread-command-events (list [foo] 98 [bar])))
  (progn
    (read-char-exclusive nil nil 0)
    unread-command-events))

(let ((unread-command-events (list [foo] 98 [bar] [baz])))
  (progn
    (read-char-exclusive nil nil 0)
    unread-command-events))

(let ((unread-command-events (list [foo] 98 [bar] [baz] [qux])))
  (progn
    (read-char-exclusive nil nil 0)
    unread-command-events))

(condition-case err
    (progn
      (setq unread-command-events '([foo] . [bar]))
      (read-char-exclusive nil nil 0))
  (error (list (car err) unread-command-events)))
